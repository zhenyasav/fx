{
  "resources": [
    {
      "id": "ee6a",
      "type": "teams-bot",
      "inputs": {
        "create": {
          "manifest": {
            "$resource": "teams-manifest:9d6e",
            "before": true
          },
          "botService": {
            "$resource": "azure-bot-service:80a2"
          }
        }
      },
      "outputs": {
        "create": {
          "manifest": "/Users/zhenya/dev/fx/teams-manifest/manifest.json"
        },
        "dev": {
          "manifest": {
            "$effect": "file",
            "description": "update botId from azure deploy in manifest",
            "file": null
          }
        }
      }
    },
    {
      "id": "9d6e",
      "type": "teams-manifest",
      "inputs": {
        "create": {
          "directory": "teams-manifest",
          "buildDirectory": "teams-manifest/build",
          "name": "fx4",
          "description": "fx4",
          "packageName": "com.zhenya.fx4",
          "developerName": "zhenya"
        }
      },
      "outputs": {
        "create": {
          "files": [
            "teams-manifest/resources/color.png",
            "teams-manifest/resources/outline.png",
            "teams-manifest/manifest.json"
          ]
        },
        "build": {
          "output": {
            "$effect": "function",
            "description": "zip manifest bundle",
            "body": null
          }
        },
        "dev": {
          "devPortal": {
            "$effect": "function",
            "description": "send Teams app to Teams Dev Portal",
            "body": null
          },
          "browser": {
            "$effect": "function",
            "description": "open a browser window to your app",
            "body": null
          }
        }
      }
    },
    {
      "id": "80a2",
      "type": "azure-bot-service",
      "inputs": {
        "create": {
          "botDisplayName": "fx4",
          "botServiceName": "fx4-80a2",
          "subscriptionId": "",
          "resourceGroup": "fx4-80a2",
          "bicepTemplateFolder": "./azure",
          "messagingEndpoint-type": "tunnel",
          "messagingEndpoint": {
            "$resource": "tunnel:0bcd"
          }
        }
      },
      "outputs": {
        "create": {
          "params": "/Users/zhenya/dev/fx/azure/bot-service-parameters.json",
          "bicep": "/Users/zhenya/dev/fx/azure/bot-service.bicep"
        },
        "dev": {
          "params": "/Users/zhenya/dev/fx/azure/bot-service-parameters.json",
          "rg": {
            "exists": {
              "stdout": "false\n",
              "stderr": ""
            },
            "create": {
              "stdout": "{\n  \"id\": \"/subscriptions/52462f3d-9226-4c1a-ae95-9a1f2b2c2e0f/resourceGroups/fx4-80a2\",\n  \"location\": \"eastus\",\n  \"managedBy\": null,\n  \"name\": \"fx4-80a2\",\n  \"properties\": {\n    \"provisioningState\": \"Succeeded\"\n  },\n  \"tags\": null,\n  \"type\": \"Microsoft.Resources/resourceGroups\"\n}\n",
              "stderr": ""
            }
          },
          "az": {
            "stdout": "",
            "stderr": "WARNING: A new Bicep release is available: v0.4.1272. Upgrade now by running \"az bicep upgrade\".\nERROR: {\"status\":\"Failed\",\"error\":{\"code\":\"DeploymentFailed\",\"message\":\"At least one resource deployment operation failed. Please list deployment operations for details. Please see https://aka.ms/DeployOperations for usage details.\",\"details\":[{\"code\":\"Conflict\",\"message\":\"{\\r\\n  \\\"error\\\": {\\r\\n    \\\"code\\\": \\\"RequestConflict\\\",\\r\\n    \\\"message\\\": \\\"Cannot modify resource with id '/subscriptions/52462f3d-9226-4c1a-ae95-9a1f2b2c2e0f/resourceGroups/fx4-80a2/providers/Microsoft.BotService/botServices/fx4-80a2' because the resource entity provisioning state is not terminal. Please wait for the provisioning state to become terminal and then retry the request.\\\"\\r\\n  }\\r\\n}\"}]}}\n",
            "code": 1
          }
        }
      }
    },
    {
      "id": "0bcd",
      "type": "tunnel",
      "inputs": {
        "create": {
          "port": 3007
        }
      },
      "outputs": {
        "dev": {
          "port": 3007,
          "url": "https://ad6d-174-127-243-36.ngrok.io"
        }
      }
    }
  ]
}